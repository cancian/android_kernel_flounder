/*
 * arch/arm64/boot/dts/tegra132-flounder-sysedp.dtsi
 *
 * Copyright (c) 2014, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along
 * with this program; if not, write to the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */

/ {
	sysedp_reactive_capping@4 {
		compatible = "nvidia,tegra124-sysedp_reactive_capping";
		nvidia,max_capping_mw = <15000>;
		nvidia,step_alarm_mw = <1000>;
		nvidia,step_relax_mw = <500>;
		nvidia,relax_ms = <250>;
		interrupt-parent = <&soctherm>;
		interrupts = <2 0x2002>;
		sysedpc {
			nvidia,name = "battery_oc4";
		};
	};

	sysedp-dynamic-capping {
		compatible = "nvidia,tegra124-sysedp-dynamic-capping";
		nvidia,corecap = <
			5000   3000   180000  933000  3000   180000  933000   2604
			6000   4000   180000  933000  3500   252000  933000   3374
			7000   5000   180000  933000  3500   324000  933000   3840
			8000   5000   252000  933000  3500   396000  933000   4265
			9000   5000   396000  933000  3500   468000  933000   4849
			10000  6000   324000  933000  3500   540000  933000   5710
			11000  7000   252000  933000  4500   540000  933000   6159
			12000  7000   396000  933000  5500   540000  933000   7009
			13000  8000   252000  933000  6000   540000  933000   6765
			14000  10000  252000  933000  6000   612000  933000   8491
			15000  10000  324000  933000  6000   684000  933000   9185
			16000  11000  252000  933000  6000   708000  933000   9640
			17000  11000  396000  933000  6000   756000  933000   10508
			18000  12000  324000  933000  7000   756000  933000   11149
			19000  13000  252000  933000  7000   804000  933000   11745
			20000  13000  324000  933000  7500   804000  933000   12170
			21000  14000  252000  933000  6500   853000  933000   12570
			22000  14000  396000  933000  9000   853000  933000   13421
			23000  15000  252000  933000  9000   853000  933000   13453
			24000  15000  396000  933000  9500   853000  933000   14304
			25000  16000  324000  933000  10000  853000  933000   15147
			26000  16800  324000  933000  11000  853000  933000   16530
			27000  16800  468000  933000  11000  853000  933000   17282
			28000  16800  540000  933000  11500  853000  933000   17282
			29000  16800  540000  933000  13000  853000  933000   18400
			30000  16800  648000  933000  13000  853000  933000   19238
			31000  16800  708000  933000  13500  853000  933000   20064
			32000  16800  708000  933000  14000  853000  933000   20064
			33000  16800  756000  933000  14500  853000  933000   20947
		>;
		nvidia,core_gain = <100>;
		nvidia,init_req_watts = <20000>;
		nvidia,throttle_depth = <75>;
		nvidia,cap_method = <2>;
	};

	sysedp {
		compatible = "nvidia,tegra124-sysedp";
		nvidia,margin = <0>;
		nvidia,min_budget = <0>;
		nvidia,initial_budget = <30000>;

		consumers {
			consumer1 {
				nvidia,consumer_name = "ov9760";
				nvidia,states = <0 180>;
			};
			consumer2 {
				nvidia,consumer_name = "imx219";
				nvidia,states = <0 411>;
			};
			consumer3 {
				nvidia,consumer_name = "speaker";
				nvidia,states = <0 641>;
			};
			consumer4 {
				nvidia,consumer_name = "wifi";
				nvidia,states = <0 2318>;
			};
			consumer5 {
				nvidia,consumer_name = "tegra-dsi-backlight.0";
				nvidia,states = <0 110 270 430 595 765 1055 1340 1655 1970 2380>;
			};
			consumer6 {
				nvidia,consumer_name = "sdhci-tegra.0";
				nvidia,states = <0 966>;
			};
			consumer7 {
				nvidia,consumer_name = "sdhci-tegra.3";
				nvidia,states = <0 966>;
			};
			consumer8 {
				nvidia,consumer_name = "tps61310";
				nvidia,states = <0 110 3350>;
			};
			consumer9 {
				nvidia,consumer_name = "dsi_0";
				nvidia,states = <0 616>;
			};
		};
	};

	sysedp_batmon_calc {
		compatible = "nvidia,tegra124-sysedp_batmon_calc";
		ocv_lut = <
			100 4300000
			80  4079000
			60  3893000
			40  3770000
			20  3710000
			0   3552000
		>;
		ibat_lut = <
			600    9000
			0      9000
			(-200) 5000
			(-210) 0
		>;
		rbat_data = <
			50000	60000	70000	76000	95000	115000	130000	155000
			50000	60000	70000	76000	95000	115000	130000	155000
			50000	60000	70000	76000	95000	115000	130000	155000
			50000	60000	70000	76000	95000	115000	130000	155000
			50000	60000	70000	76000	95000	115000	130000	155000
			50000	60000	70000	76000	95000	115000	130000	155000
		>;
		temp_axis = <600 450 300 230 150 50 0 (-200)>;
		capacity_axis = <100 80 60 40 20 0>;
		power_supply = "battery";
		r_const = <40000>;
		vsys_min = <2600000>;
	};
};
