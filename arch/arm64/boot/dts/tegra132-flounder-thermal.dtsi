#include <dt-bindings/thermal/thermal.h>

/ {
	soctherm@0x700E2000 {
		throttle@critical {
			status = "okay";
		};
		throttle@heavy {
			status = "okay";
			throttle_dev = <&{/soctherm@0x700E2000/throttle_dev@cpu_medium}
			&{/soctherm@0x700E2000/throttle_dev@gpu_medium}>;
		};
		throttle@light {
			status = "disabled";
		};
		throttle@oc1 {
			status = "disabled";
		};
		throttle@oc2 {
			status = "disabled";
		};
		throttle@oc3 {
			status = "disabled";
		};
		throttle@oc4 {
			status = "okay";
			device_type = "throttlectl";
			oc-alarm-id = <3>;
			priority = <10>;
			mode = "brief";
			intr;
			active_low;
			count_threshold = <15>;
			filter = <5100000>;
			throttle_dev = <&{/soctherm@0x700E2000/throttle_dev@cpu_medium}
			&{/soctherm@0x700E2000/throttle_dev@gpu_medium}>;
		};
		throttle_dev@cpu_high {
			priority = <100>;
			level = "high_throttling";
		};
		throttle_dev@cpu_medium {
			level = "medium_throttling";
		};
		throttle_dev@gpu_high {
			priority = <100>;
			level = "high_throttling";
		};
		throttle_dev@gpu_medium {
			level = "medium_throttling";
		};
	};

	thermal-zones {

		CPU-therm {
			status 			= "okay";
			polling-delay		= <0>;
			polling-delay-passive	= <1000>;
			hotspot_offset		= <6000>;
			thermal-sensors		= <&{/soctherm@0x700E2000} 0>;
			thermal-zone-params {
				governor-name = "pid_thermal_gov";
				max_err_temp = <9000>;
				max_err_gain = <1000>;
				gain_p = <1000>;
				gain_d = <0>;
				up_compensation = <20>;
				down_compensation = <20>;
			};
			trips {
				cpu_critical {
					temperature = <101000>;
					hysteresis = <0>;
					type = "critical";
					writable;
				};
				cpu_heavy {
					temperature = <99000>;
					hysteresis = <0>;
					type = "hot";
					writable;
				};
				cpu_throttle {
					temperature = <85000>;
					hysteresis = <0>;
					type = "passive";
					writable;
				};
			};
			cooling-maps {
				map0 {
					trip = <&{/thermal-zones/CPU-therm/trips/cpu_critical}>;
					cdev-type = "tegra-shutdown";
					cooling-device = <&{/soctherm@0x700E2000/throttle@critical}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
				map1 {
					trip = <&{/thermal-zones/CPU-therm/trips/cpu_heavy}>;
					cdev-type = "tegra-heavy";
					cooling-device = <&{/soctherm@0x700E2000/throttle@heavy}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
				map2 {
					trip = <&{/thermal-zones/CPU-therm/trips/cpu_throttle}>;
					cdev-type = "cpu-balanced";
					cooling-device = <&{/bthrot_cdev/cpu_balanced}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};

		GPU-therm {
			status		 	= "okay";
			polling-delay		= <0>;
			polling-delay-passive	= <1000>;
			hotspot_offset		= <6000>;
			thermal-sensors		= <&{/soctherm@0x700E2000} 1>;
			thermal-zone-params {
				governor-name = "pid_thermal_gov";
				max_err_temp = <9000>;
				max_err_gain = <1000>;
				gain_p = <1000>;
				gain_d = <0>;
				up_compensation = <20>;
				down_compensation = <20>;
			};
			trips {
				gpu_critical {
					temperature = <101000>;
					hysteresis = <0>;
					type = "critical";
					writable;
				};
				gpu_heavy {
					temperature = <99000>;
					hysteresis = <0>;
					type = "hot";
					writable;
				};
				gpu_throttle {
					temperature = <85000>;
					hysteresis = <0>;
					type = "passive";
					writable;
				};
			};
			cooling-maps {
				map0 {
					trip = <&{/thermal-zones/GPU-therm/trips/gpu_critical}>;
					cdev-type = "tegra-shutdown";
					cooling-device = <&{/soctherm@0x700E2000/throttle@critical}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
				map1 {
					trip = <&{/thermal-zones/GPU-therm/trips/gpu_heavy}>;
					cdev-type = "tegra-heavy";
					cooling-device = <&{/soctherm@0x700E2000/throttle@heavy}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
				map2 {
					trip = <&{/thermal-zones/GPU-therm/trips/gpu_throttle}>;
					cdev-type = "gpu-balanced";
					cooling-device = <&{/bthrot_cdev/gpu_balanced}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};
		
		MEM-therm {
			status 			= "okay";
			polling-delay		= <0>;
			polling-delay-passive	= <1000>;
			hotspot_offset		= <6000>;
			thermal-sensors		= <&{/soctherm@0x700E2000} 2>;
			trips {
				mem_critical {
					temperature = <101000>;
					hysteresis = <0>;
					type = "critical";
					writable;
				};
			};
			cooling-maps {
				map0 {
					trip = <&{/thermal-zones/MEM-therm/trips/mem_critical}>;
					cdev-type = "tegra-shutdown";
					cooling-device = <&{/soctherm@0x700E2000/throttle@critical}
						THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};

		PLL-therm {
			status 			= "okay";
			polling-delay		= <0>;
			polling-delay-passive	= <1000>;
			hotspot_offset		= <6000>;
			thermal-sensors		= <&{/soctherm@0x700E2000} 3>;
			thermal-zone-params {
				governor-name = "pid_thermal_gov";
				max_err_temp = <9000>;
				max_err_gain = <1000>;
				gain_p = <1000>;
				gain_d = <0>;
				up_compensation = <20>;
				down_compensation = <20>;
			};
		};

		Tboard_tegra {
			status 			= "disabled";
			polling-delay = <15000>; /* milliseconds */
			polling-delay-passive = <0>; /* milliseconds */
			thermal-sensors = <&tegra_nct72 0>;

			trips {
				therm_est_trip: therm_est_trip {
					temperature = <50000>;
					type = "active";
					hysteresis = <1000>;
					writable;
				};
			};

			cooling-maps {
				map0 {
					trip = <&therm_est_trip>;
					cooling-device = <&dummy_cool_dev 1 1>;
					contribution = <100>;
					cdev-type = "therm_est_activ";
				};
			};

			thermal-zone-params {
				governor-name = "pid_thermal_gov";
			};
		};

		Tdiode_tegra {
			status 			= "disabled";
			polling-delay = <0>; /* milliseconds */
			polling-delay-passive = <0>; /* milliseconds */
			thermal-sensors = <&tegra_nct72 1>;
		};
	};

	dummy_cool_dev: dummy-cool-dev {
			compatible = "dummy-cooling-dev";
			#cooling-cells = <2>; /* min followed by max */
	};
};
